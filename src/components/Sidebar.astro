---
import { Image } from 'astro:assets';
import { urlFor } from '../lib/sanity.ts';

const { settings } = Astro.props;
---

<aside class="relative w-full lg:w-2/5 lg:h-screen lg:sticky top-0 bg-gradient-to-br from-slate-100 to-slate-200 dark:from-slate-900 dark:to-slate-800 p-8 lg:p-16 flex flex-col shadow-xl rounded-b-2xl lg:rounded-none transition-all duration-500">
  <!-- Botó canvi de tema -->
  <div class="absolute top-8 right-8 z-10">
    <button id="theme-toggle" class="p-2 rounded-full text-slate-500 dark:text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-800 focus:outline-none focus:ring-2 focus:ring-indigo-500 transition" aria-label="Canvia el tema">
      <!-- Sol (light mode) -->
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="dark:hidden"><circle cx="12" cy="12" r="5"/><path d="M12 1v2m0 18v2m9-9h-2M5 12H3m15.07-7.07-1.42 1.42M6.35 17.66l-1.42 1.42M17.66 17.66l-1.42-1.42M6.35 6.34l-1.42-1.42"/></svg>
      <!-- Lluna (dark mode) -->
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="hidden dark:block"><path d="M21 12.79A9 9 0 1111.21 3a7 7 0 109.79 9.79z"/></svg>
    </button>
  </div>

  <div class="flex flex-col items-center text-center h-full justify-between">
    <!-- Foto, nom i títol -->
    <div>
      {settings?.foto && (
        <Image
          src={urlFor(settings.foto).url()}
          width={120}
          height={120}
          alt={`Foto de ${settings.nom}`}
          class="h-32 w-32 rounded-full object-cover mb-6 border-4 border-white dark:border-slate-800 shadow-lg transition-transform duration-300 hover:scale-105"
        />
      )}
      <h1 class="text-4xl lg:text-5xl font-bold mb-2 tracking-tight">{settings.nom}</h1>
      <h2 class="text-lg text-indigo-600 dark:text-indigo-400 font-medium mb-4">{settings.titol}</h2>
      <p class="text-base text-slate-600 dark:text-slate-400 mb-4">{settings.resum}</p>
    </div>

    <!-- Info contacte -->
    <div class="mt-8 space-y-2 text-sm text-slate-700 dark:text-slate-300 w-full">
      <div class="flex items-center justify-center gap-2">
        <!-- Icona ubicació -->
        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 inline-block text-indigo-500" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 2a6 6 0 016 6c0 5-6 10-6 10S4 13 4 8a6 6 0 016-6zm0 8a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd" /></svg>
        {settings.localitat}
      </div>
      <div class="flex items-center justify-center gap-2">
        <!-- Icona correu -->
        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 inline-block text-indigo-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M16 12l-4 4m0 0l-4-4m4 4V4" /></svg>
        <a href={`mailto:${settings.email}`} class="underline hover:text-indigo-600">{settings.email}</a>
      </div>
      {settings.linkedin && (
        <div class="flex items-center justify-center gap-2">
          <!-- Icona LinkedIn -->
          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 inline-block text-indigo-500" viewBox="0 0 24 24" fill="currentColor"><path d="M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-4 0v7h-4v-7a6 6 0 016-6z"/><circle cx="2.5" cy="9.5" r="2.5"/><rect x="2" y="12" width="4" height="7"/></svg>
          <a href={settings.linkedin} target="_blank" rel="noopener" class="underline hover:text-indigo-600">LinkedIn</a>
        </div>
      )}
      {settings.github && (
        <div class="flex items-center justify-center gap-2">
          <!-- Icona GitHub -->
          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 inline-block text-indigo-500" viewBox="0 0 24 24" fill="currentColor"><path fill-rule="evenodd" d="M12 2C6.48 2 2 6.48 2 12c0 4.42 2.87 8.17 6.84 9.5.5.09.66-.22.66-.48 0-.24-.01-.87-.01-1.7-2.78.6-3.37-1.17-3.37-1.17-.45-1.15-1.1-1.46-1.1-1.46-.9-.62.07-.61.07-.61 1 .07 1.52 1.02 1.52 1.02.89 1.52 2.34 1.08 2.91.82.09-.65.35-1.08.63-1.33-2.22-.25-4.56-1.11-4.56-4.95 0-1.09.39-1.98 1.03-2.68-.1-.25-.45-1.28.1-2.66 0 0 .84-.27 2.75 1.02A9.58 9.58 0 0112 6.8c.85.004 1.71.115 2.5.337 1.9-1.29 2.73-1.02 2.73-1.02.56 1.38.21 2.41.1 2.66.64.7 1.03 1.59 1.03 2.68 0 3.85-2.34 4.7-4.57 4.95.36.31.68.92.68 1.86 0 1.34-.01 2.42-.01 2.75 0 .27.16.58.68.48A10 10 0 0022 12c0-5.52-4.48-10-10-10z" clip-rule="evenodd"/></svg>
          <a href={settings.github} target="_blank" rel="noopener" class="underline hover:text-indigo-600">GitHub</a>
        </div>
      )}
    </div>
  </div>
</aside>
